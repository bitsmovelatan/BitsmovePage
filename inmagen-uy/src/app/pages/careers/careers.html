<div class="careers-container">
  <!-- Header -->
  <div class="page-header">
    <h1>{{ t('careers.title') }}</h1>
    <p class="subtitle">{{ t('careers.subtitle') }}</p>
    <p class="description">{{ t('careers.description') }}</p>
  </div>

  <!-- Benefits Section -->
  <section class="benefits-section">
    <h2>{{ t('careers.benefits.title') }}</h2>
    <div class="benefits-grid">
      <mat-card class="benefit-card">
        <mat-card-content>
          <mat-icon>payments</mat-icon>
          <h3>{{ t('careers.benefits.salary') }}</h3>
        </mat-card-content>
      </mat-card>
      <mat-card class="benefit-card">
        <mat-card-content>
          <mat-icon>school</mat-icon>
          <h3>{{ t('careers.benefits.training') }}</h3>
        </mat-card-content>
      </mat-card>
      <mat-card class="benefit-card">
        <mat-card-content>
          <mat-icon>trending_up</mat-icon>
          <h3>{{ t('careers.benefits.growth') }}</h3>
        </mat-card-content>
      </mat-card>
      <mat-card class="benefit-card">
        <mat-card-content>
          <mat-icon>groups</mat-icon>
          <h3>{{ t('careers.benefits.environment') }}</h3>
        </mat-card-content>
      </mat-card>
    </div>
  </section>

  <!-- Application Form -->
  <section class="form-section">
    <mat-card class="form-card">
      <mat-card-header>
        <mat-card-title>{{ t('careers.apply.title') }}</mat-card-title>
      </mat-card-header>
      
      <mat-card-content>
        <form [formGroup]="applicationForm" (ngSubmit)="onSubmit()">
          <div class="form-row">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>{{ t('careers.apply.name') }}</mat-label>
              <input matInput formControlName="fullName" placeholder="Juan Pérez">
              <mat-icon matPrefix>person</mat-icon>
              @if (applicationForm.get('fullName')?.invalid && applicationForm.get('fullName')?.touched) {
                <mat-error>{{ getErrorMessage('fullName') }}</mat-error>
              }
            </mat-form-field>
          </div>

          <div class="form-row-double">
            <mat-form-field appearance="outline">
              <mat-label>{{ t('careers.apply.email') }}</mat-label>
              <input matInput type="email" formControlName="email" placeholder="juan@example.com">
              <mat-icon matPrefix>email</mat-icon>
              @if (applicationForm.get('email')?.invalid && applicationForm.get('email')?.touched) {
                <mat-error>{{ getErrorMessage('email') }}</mat-error>
              }
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>{{ t('careers.apply.phone') }}</mat-label>
              <input matInput type="tel" formControlName="phone" placeholder="099123456">
              <mat-icon matPrefix>phone</mat-icon>
              @if (applicationForm.get('phone')?.invalid && applicationForm.get('phone')?.touched) {
                <mat-error>{{ getErrorMessage('phone') }}</mat-error>
              }
            </mat-form-field>
          </div>

          <div class="form-row-double">
            <mat-form-field appearance="outline">
              <mat-label>{{ t('careers.apply.position') }}</mat-label>
              <mat-select formControlName="position">
                @for (position of positions; track position.value) {
                  <mat-option [value]="position.value">{{ position.label }}</mat-option>
                }
              </mat-select>
              <mat-icon matPrefix>work</mat-icon>
              @if (applicationForm.get('position')?.invalid && applicationForm.get('position')?.touched) {
                <mat-error>{{ getErrorMessage('position') }}</mat-error>
              }
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Disponibilidad</mat-label>
              <mat-select formControlName="availability">
                <mat-option value="immediate">Inmediata</mat-option>
                <mat-option value="2weeks">2 semanas</mat-option>
                <mat-option value="1month">1 mes</mat-option>
                <mat-option value="negotiable">A convenir</mat-option>
              </mat-select>
              <mat-icon matPrefix>schedule</mat-icon>
              @if (applicationForm.get('availability')?.invalid && applicationForm.get('availability')?.touched) {
                <mat-error>{{ getErrorMessage('availability') }}</mat-error>
              }
            </mat-form-field>
          </div>

          <div class="form-row">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>{{ t('careers.apply.experience') }}</mat-label>
              <textarea matInput formControlName="experience" rows="4" 
                placeholder="Describe tu experiencia laboral relevante..."></textarea>
              <mat-icon matPrefix>history_edu</mat-icon>
              @if (applicationForm.get('experience')?.invalid && applicationForm.get('experience')?.touched) {
                <mat-error>{{ getErrorMessage('experience') }}</mat-error>
              }
            </mat-form-field>
          </div>

          <div class="form-row">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>{{ t('careers.apply.motivation') }}</mat-label>
              <textarea matInput formControlName="motivation" rows="4" 
                placeholder="¿Por qué quieres trabajar con nosotros?"></textarea>
              <mat-icon matPrefix>favorite</mat-icon>
              @if (applicationForm.get('motivation')?.invalid && applicationForm.get('motivation')?.touched) {
                <mat-error>{{ getErrorMessage('motivation') }}</mat-error>
              }
            </mat-form-field>
          </div>

          <!-- CV Upload -->
          <div class="form-row">
            <div class="cv-upload-section">
              <input 
                type="file" 
                id="cvUpload" 
                (change)="onFileSelected($event)"
                accept=".pdf,.doc,.docx"
                style="display: none;">
              
              <button mat-raised-button type="button" color="primary" (click)="triggerFileInput()" class="upload-button">
                <mat-icon>upload_file</mat-icon>
                {{ t('careers.apply.cv') }}
              </button>

              @if (selectedFileName) {
                <mat-chip-set class="file-chip">
                  <mat-chip [removable]="true" (removed)="removeFile()">
                    <mat-icon matChipAvatar>description</mat-icon>
                    {{ selectedFileName }}
                    <mat-icon matChipRemove>cancel</mat-icon>
                  </mat-chip>
                </mat-chip-set>
              }

              <p class="file-info">
                <mat-icon>info</mat-icon>
                Formatos permitidos: PDF, DOC, DOCX (Máx. 5MB)
              </p>
            </div>
          </div>

          <!-- Submit Button -->
          <div class="form-actions">
            <button 
              mat-raised-button 
              color="accent" 
              type="submit" 
              class="submit-button"
              [disabled]="applicationForm.invalid || !selectedFile || isSubmitting">
              <mat-icon>send</mat-icon>
              @if (isSubmitting) {
                <span>Enviando...</span>
              } @else {
                <span>{{ t('careers.apply.submit') }}</span>
              }
            </button>
          </div>
        </form>
      </mat-card-content>
    </mat-card>
  </section>

  <!-- Positions Available -->
  <section class="positions-section">
    <h2>{{ t('careers.positions.title') }}</h2>
    <div class="positions-grid">
      <mat-card class="position-card">
        <mat-card-header>
          <mat-icon mat-card-avatar>restaurant</mat-icon>
          <mat-card-title>{{ t('careers.positions.baker.title') }}</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <p>{{ t('careers.positions.baker.description') }}</p>
        </mat-card-content>
      </mat-card>

      <mat-card class="position-card">
        <mat-card-header>
          <mat-icon mat-card-avatar>chef_hat</mat-icon>
          <mat-card-title>{{ t('careers.positions.cook.title') }}</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <p>{{ t('careers.positions.cook.description') }}</p>
        </mat-card-content>
      </mat-card>

      <mat-card class="position-card">
        <mat-card-header>
          <mat-icon mat-card-avatar>storefront</mat-icon>
          <mat-card-title>{{ t('careers.positions.sales.title') }}</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <p>{{ t('careers.positions.sales.description') }}</p>
        </mat-card-content>
      </mat-card>

      <mat-card class="position-card">
        <mat-card-header>
          <mat-icon mat-card-avatar>local_shipping</mat-icon>
          <mat-card-title>{{ t('careers.positions.delivery.title') }}</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <p>{{ t('careers.positions.delivery.description') }}</p>
        </mat-card-content>
      </mat-card>
    </div>
  </section>

  <!-- Page Navigation -->
  <app-page-navigation currentPath="/careers"></app-page-navigation>
</div>